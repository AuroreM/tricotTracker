<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en">
<head>
    <style type="text/css">
        .stitch-0 {
            background-color: white;
            width: 30px;
            height: 30px;
        }
        .stitch-1
        {
            background-color: black;
            width: 30px;
            height: 30px;
        }
        .stitch-2 {
            background-color: aquamarine;
            width: 30px;
            height: 30px;
        }
        .table {
            width: 80%;
            margin: 0 auto;
            border: 1px black solid;
        }
    </style>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Title Goes Here</title>
</head>
    <body>
    <table>
        <tbody id="container">

        </tbody>
    </table>
    <script src="/socket.io/socket.io.js"></script>
    </body>
</html>

<script type="">

    var model = {
        "color" : {
            1 : "#FF0000",
            2 : "#000000"
    },
        "data" : [
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [1,2,1,1,1,2,1,1,1,2,1],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [1,2,1,1,1,2,1,1,1,2,1],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0],
        [0,1,1,1,1,2,1,1,1,1,0]
    ],
        "currentRow" : 0

    };

    updateTable = function(state) {
        var container = document.getElementById('container');
        for (var rank = 0; rank < state.data.length; rank++) {
            var line = document.createElement('tr');
            state.data[rank].map(function(color) {
                var cell = document.createElement('td');
                cell.classList.add('stitch-' + color);
                cell.style.opacity = rank < state.currentRow ? 1 : 0.2;
                line.appendChild(cell);
            })
            container.appendChild(line);
        }
    };

    var socket = io();
    socket.on('move', function (moveCount) {
        model.currentRow += 1;
        updateTable(model)
    })
</script>